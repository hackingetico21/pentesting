#!/usr/bin/bash
#Autor: kcius
clear
function intro(){
echo '     _____                                   '
echo '  __| __  |__  ______  ____  __   _  ______  '
echo ' |  |/ /     ||   ___||    ||  | | ||   ___| '
echo ' |     \     ||   |__ |    ||  |_| | `-.`-.  '
echo ' |__|\__\  __||______||____||______||______| '
echo '    |_____|                                  '
echo '                                             '
echo 'Sitio web: https://hackingetico.cl'
echo 'Github: https://github.com/hackingetico21'
echo ""
}
intro
read -p "Ingrese el sitio web a revisar: " sitio
echo ""

dato=$(ping -c 1 $sitio | grep PING | awk '{ print $3 }' | sed 's/^.//;s/.$//')

trap ctrl_c INT

function ctrl_c(){
	echo ""
	echo "Saliendo...bye"
	exit 1
}

function principal(){
	echo "Opciones"
	echo ""
	echo "1 - Realizar un NMAP completo"
	echo "2 - Realizar un NMAP de vulnerabilidades"
	echo "3 - Ejecutar un whatweb"
	echo "4 - Conocer el Sistema Operativo del objetivo"
	echo "5 - Buscar sitios con SQLi automaticamente"
	echo "6 - Cambiar objetivo"
	echo ""
	echo "* Para salir, presiones ctrl + c"
	}
function opciones(){
clear
intro
principal
echo ""
read -p "Seleccione una opcion(1-6): " opcion

case $opcion in
	1)
	echo "COMANDO USADO: 'nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn IP-objetivo'"
	echo ""
		nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn $dato 2>/dev/null | grep open
	;;
	2)
	echo "COMANDO USADO: 'nmap --script vuln IP-objetivo'"
	echo ""
		nmap --script vuln $dato
	;;
	3)
	echo "COMANDO USADO: 'whatweb Sitio-objetivo'"
	echo ""
		whatweb $sitio
	;;
	4)
		so=$(ping -c 1 $sitio | grep ttl | awk '{ print $7 }' | sed 's/ttl=//')
		if [ $so -eq 128 ]
		then
			if [ $so -eq 64 ]
			then
			echo ""
			echo "El Sistema Operativo es Linux"
			else
			echo ""
			echo "El Sistema Operativo es Windows"
			fi
			else
			echo ""
			echo "Indefinido"
		fi
	;;
	5)
        echo "COMANDO USADO: 'sqlmap -g "inurl:productos.php?id=" --dbs --random-agent --batch'"
        echo ""
                sqlmap -g "inurl:productos.php?id=" --dbs --random-agent --batch
        ;;
	6)
	echo ""
	read -p "Ingrese otra pagina web objetivo: " sitio
	dato=$(ping -c 1 $sitio | grep PING | awk '{ print $3 }' | sed 's/^.//;s/.$//')
	;;
esac
echo ""
echo "Presione cualquier tecla para continuar..."
read -n 1
}


while true; do
opciones
done
